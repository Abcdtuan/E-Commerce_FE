<div class="coupon-container">
  <div class="header">
    <h2>Danh sách Coupon</h2>
  </div>

  <!-- Table hiển thị danh sách coupons -->
  <div class="table-wrapper">
    <table class="coupon-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Code</th>
          <th>Discount</th>
          <th>Expiry Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let coupon of coupons">
          <td>{{coupon.id}}</td>
          <td>{{coupon.name}}</td>
          <td>{{coupon.code}}</td>
          <td>{{coupon.discount}}</td>
          <td>{{ coupon.expirationDate | date: 'dd/MM/yyyy' }}</td>
          <td class="actions-cell">
            <div class="actions">
              <button class="btn update" (click)="openUpdate(coupon)">Sửa</button>
              <button class="btn delete" (click)="deleteCoupon(coupon.id)">Xóa</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal cập nhật coupon -->
  <div class="modal" *ngIf="showUpdate">
    <div class="modal-content">
      <h3>Cập nhật Coupon</h3>
      <form [formGroup]="couponForm" (ngSubmit)="updateCoupon()">
        <div class="form-group">
          <label for="name">Tên coupon</label>
          <input id="name" type="text" formControlName="name">
          <div *ngIf="couponForm.get('name')?.invalid && couponForm.get('name')?.touched" class="error">
            Tên là bắt buộc
          </div>
        </div>

        <div class="form-group">
          <label for="code">Code</label>
          <input id="code" type="text" formControlName="code">
          <div *ngIf="couponForm.get('code')?.invalid && couponForm.get('code')?.touched" class="error">
            Code là bắt buộc
          </div>
        </div>

        <div class="form-group">
          <label for="discount">Discount</label>
          <input id="discount" type="number" formControlName="discount">
          <div *ngIf="couponForm.get('discount')?.invalid && couponForm.get('discount')?.touched" class="error">
            Discount là bắt buộc
          </div>
        </div>

        <div class="form-group">
          <label for="expirationDate">Expiry Date</label>
          <input id="expirationDate" type="date" formControlName="expirationDate">
          <div *ngIf="couponForm.get('expirationDate')?.invalid && couponForm.get('expirationDate')?.touched" class="error">
            Ngày hết hạn là bắt buộc
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" [disabled]="couponForm.invalid">Cập nhật</button>
          <button type="button" (click)="close()">Hủy</button>
        </div>
      </form>
    </div>
  </div>
</div>
