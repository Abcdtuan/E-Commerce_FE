<div class="order-container">
  <div class="header">
    <h2>Danh sách Order</h2>
    <div class="search-section">
      <form [formGroup]="searchOrders" (ngSubmit)="submitSearch()" class="search-form">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>Tìm kiếm theo tên</mat-label>
          <input matInput formControlName="name" placeholder="Nhập tên khách hàng" />
          <button mat-icon-button matSuffix type="submit">
            <mat-icon>search</mat-icon>
          </button>
        </mat-form-field>
      </form>
    </div>
  </div>
   
  <mat-tab-group [(selectedIndex)]="selectedTab">
    <mat-tab label="Đã đặt"></mat-tab>
    <mat-tab label="Đang giao"></mat-tab>
    <mat-tab label="Đã giao"></mat-tab>
    <mat-tab label="Đã hủy"></mat-tab>
  </mat-tab-group>

  <div class="table-wrapper">
    <table class="order-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Tên</th>
          <th>Giá tiền</th>
          <th>Ghi chú</th>
          <th>Địa chỉ</th>
          <th>Ngày</th>
          <th>Trạng thái</th>
          <th>Cập nhật trạng thái</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of filteredOrders()">
          <td>{{order.id}}</td>
          <td>{{order.userName || 'N/A'}}</td>
          <td class="bold-cell">{{formatCurrency(order.amount)}}</td>
          <td>{{order.orderDescription || 'Không có mô tả'}}</td>
          <td>{{order.address}}</td>
          <td>{{ order.date | date: 'dd/MM/yyyy HH:mm' }}</td>
          <td>
            <span class="status-badge" [ngClass]="getStatusClass(order.orderStatus)">
              {{getStatusLabel(order.orderStatus)}}
            </span>
          </td>
          <td>
            <button class="status-change-btn" [matMenuTriggerFor]="menu">Thay đổi</button>
            <mat-menu #menu="matMenu" class="status-menu">
              <button mat-menu-item class="menu-item-shipped" (click)="changeOrderStatus(order.id, 'Shipped')">
                Đã gửi hàng
              </button>
              <button mat-menu-item class="menu-item-delivered" (click)="changeOrderStatus(order.id, 'Delivered')">
                Đã giao hàng
              </button>
              <button mat-menu-item class="menu-item-cancelled" (click)="changeOrderStatus(order.id, 'Cancelled')">
                Đã hủy
              </button>
            </mat-menu>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
