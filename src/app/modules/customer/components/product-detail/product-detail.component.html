<div class="product-detail-container" *ngIf="product">

  <div class="product-image-section" *ngIf="product && product.images?.length > 0">
    <button class="slider-btn left" (click)="prevImage()">&#10094;</button>

    <img [src]="product.images[currentImageIndex].processedImg" alt="img" class="product-image">

    <button class="slider-btn right" (click)="nextImage()">&#10095;</button>
    <div class="dots">
      <span *ngFor="let img of product.images; let i = index"
            [class.active]="i === currentImageIndex"
            (click)="currentImageIndex = i"></span>
    </div>
  </div>


  <div class="product-info-section">
    <h1 class="product-title">{{ product.name }}</h1>
    

    <div class="product-price">
      <span class="price-current">{{ product.price | number:'1.0-0' }}₫</span>
      <span class="price-old" *ngIf="product.price">{{ product.price | number:'1.0-0' }}₫</span>
    </div>

    <div>
      <span>
        59 giải phóng, Hai Bà Trưng, Hà Nội - 0989400954
      </span>
    </div>
     
    
    <div class="action-buttons">
      <button mat-raised-button color="primary" (click)="addProductToCart(product.id)">
        Thêm vào giỏ hàng
      </button>
    </div>

    <div class="category">
      <span>Danh mục:</span> {{ product.categoryName}}
    </div>
  </div>
</div>
<div class="product-description-section" *ngIf="product">
  <h2>Mô tả sản phẩm</h2>
  <p>{{ product.description }}</p>
</div>
<div class="reviews-section" *ngIf="reviewList && reviewList.length > 0">
  <h2>Đánh giá từ khách hàng</h2>
  
  <div class="review-item" *ngFor="let review of reviewList">
    <!-- Header: Tên và ngày -->
    <div class="review-header">
      <div class="review-user">
        <span class="username">{{ review.userName }}</span>
        <span class="review-date">{{ review.date | date:'dd/MM/yyyy' }}</span>
      </div>
    </div>

    <!-- Rating (Sao) -->
    <div class="review-rating">
      <span *ngFor="let star of getStarArray(review.rating)" 
            class="star" 
            [class.filled]="star">
        ★
      </span>
    </div>

    <!-- Mô tả đánh giá -->
    <div class="review-description">
      <p>{{ review.description }}</p>
    </div>

    <!-- Hình ảnh đánh giá (nếu có) -->
    <div class="review-images" *ngIf="review.images && review.images.length > 0">
      <img *ngFor="let image of review.images" 
           [src]="image.processedReviewImg" 
           alt="Review image"
           class="review-image">
    </div>
  </div>
</div>

<!-- Hiển thị khi chưa có đánh giá -->
<div class="no-reviews" *ngIf="reviewList && reviewList.length === 0">
  <p>Chưa có đánh giá nào cho sản phẩm này.</p>
</div>


